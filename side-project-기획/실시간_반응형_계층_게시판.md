# 실시간 반응형 계층 게시판 기획

## 1. 목적 및 의도

### 1. 기술적 PoC (Prove of concept) 중심

- 기획 측면에서 비즈니스 모델, 사용성 측면에서 UI/UX는 배제

### 2. 함수형 패러다임 및 반응형 패러다임 및 Rx(ReactiveExtention) 숙달

- 동기적 프로그래밍은 함수형 라이브러리인 ramdajs 활용

- 비동기적 프로그래밍은 Rxjs 활용
  - '다중 이벤트를 순차적으로 시간의 축으로 추상화한 스트림'으로 관리

### 3. 기존의 REST API 형식의 비연결성 특성이 아닌, Statefull 서버와 클라이언트 단에서의 반응형 아키텍처 설계 및 구현

- (자의적 정의) 서버 클라이언트 간 반응형 아키텍처란, 아래 2가지 과정의 반복이다.
    1. 서버의 상태가 관찰 대상이고, 서버의 상태가 변경 시, 변경 상태를 접속한 모든 클라이언트에게 전파한다.
    2. 클라이언트는 서버에게 이벤트를 전달한다.

## 2. 주요 기능

1. 최대 동시 접속자 수 제한

- 만석 시, 대기열 작동

2. 실시간으로 서버에서 클라이언트 제어

- 서버에서 클라이언트가 'Active' 상태에서 특정 제약적인 상태 (예시, '채팅 금지', 'Read Only', '부분별 권한 설정') 및 특정 동작 ('특정 페이지로 이동', '대기열로 보내기 등' )을 제어한다.

3. 클라이언트 측

- 게시물 관련
  - 게시물 조회
  - 게시물 등록
  - 게시물 수정
  - 게시물 삭제
  - 게시물에 하위 게시물 등록
  - 게시물 단위로 실시간 갱신 On/Off
- 서버와 세션 관리
  - 서버가 꺼져 있으면, 서버가 켜질 때까지 대기
  - 대기열 관련

4. 서버 측

- 클라이언트에게 상태 전파 방법
  - Broadcast or Multicast or Unicast
- 게시물 관련 (생략)
- 클라이언트 세션 관리
  - 최대 접속자수 설정

  - 대기열 로직
  - 1개 이상의 클라이언트 상태 변경
  - 클라이언트 기능 제어
    - 특정 페이지로 이동
    - 대기열로 보내기
  - 클라이언트의 행동 감지 (로깅?)
  - 1분 단위로 jwt 토큰 갱신

4. 테스트

- 클라이언트 단
  - 유닛 테스트
  - E2E 테스트
- 서버 단
  - 유닛 테스트
  - API 단 E2E 테스트
  - 부하 테스트

## 3. 기술 스택

### 서버

- typescript
- nestjs
- RESPTAPI + websocket
- rxjs
- typeorm or prisma
- postgresql
- redis

### 클라이언트

- typescript
- react
- webpack
- redux
- redux observable
- rxjs
- react table
- emotion

## 4. 마일스톤

1. (집) 로컬에서 서버 구축 및 운영

- DNS 설정
- https 설정

2. 기존에 작성한 ramdajs 기반 tree 자료구조 라이브러리를 리팩토링 및 테스트 코드 작성

3. ...

## 5. 의문 및 추가적인 자료 조사

## 6. 래퍼런스
