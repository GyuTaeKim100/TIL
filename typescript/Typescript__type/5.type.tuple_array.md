# 배열과 튜플, 언제 튜플을 사용해야 할까?

## 배열

- 특징
  - 배열에 타입을 정의하지 않아도, 선언 시 배열 요소의 타입에 따라서 암시적 타입 변환 적용 됨.
  - 같은 타입의 요소의 집합
- 예제

  - ```
        // 문자열 배열에 대해서 
        const fruits: string[] = ['a', 'b']; 

        // 숫자 배열에 대해서
        const scores: number[] = [1,2,3];
      ```

- 제네릭 적용 예제

  - ```
        // 문자열 배열의 제네릭 적용
        const fruites2: Array<string> = ['a','b'];

        // 숫자 배열의 제네릭 적용
        const corese2: Array<number> = [1,2,3]
     ```

- 배열 타입 할당 조건을 명시적으로 선언하는 방법
  - 모든 배열 요소가 동일한 타입이여야 함.

- readonly를 목적으로 사용하는 경우
  - readOnlu를 통해 Object 불변성
  - 예제

    - ```
        // readonly : 인자값을 변경 할 수 없게 설정
        function printArray(fruits:  readonly string[]) {
          fruits.push('item'); // ts(2339) 에러 출력
        }

        // readonly 허용 안되는 케이스
        function printArray(fruits: readonly  Array<string>) {
            // do something
        }
        ```

      - readonly 용도를 통일하기 위해서, 제네릭을 이용한 배열 선언보다 기존 배열 선언을 더 권장

- 복합적인 어떠한 데이터 타입도 아이템으로 선정할 수 있는 배열이 필요한 경우, any [] 타입을 사용

  - ```
      let member : any[] = [{name:'이권'}, '김장겸', ['장도일']]
    ```

  - any[]는 배열이 아닌 다른 타입을 할당하면 컴파일 오류 발생

    - ```
          let member: any[];

          // 컴파일 오류 발생
          // ts 209, 형식은 any[] 형식에 할당할 수 없습니다.
          members = 209;
        ```

## Tuple

- 서로 다른 타입을 가질 수 있는 집합
  - TS는, 배열 타입을 보다 특수한 형태로 사용할 수 있는 tuple 타입을 지원
  - tuple에 명시적으로 지정된 형식에 따라 아이템 순서를 설정해야 되고, 추가 되는 아이템 또한 tuple에 명시된 타입만 사용 가능하다.
  - 발음은 '터플'
- *TS는 인덱스를 이용한 데이터 접근 방식은 권장하지는 않음.*
  - 이유는 데이터 접근 시 인덱스 방식 접근은 가독성이 떨어짐. 코드로 인덱스 방식 접근을 확인 후, 정의를 확인 해야 함.
    - 에제

      - ```
           let student: [string, number];

           student = ['gyutae', 90];
           student[0] // name 
           student[1] // 90
          ```

- 튜플은 멤버를 통해 직접 접근이 불가능 (명시적인 접근 방법)
  - 예제

    - ```
           let student: [string, number];

           student = ['gyutae', 90];
           student.name; // BOOM!
           student.age; // BOOM!
         ```

- 튜플을 특정한 경우가 아니라면, Interface 또는 type alias, class로 대체하는 것을 권장
- 튜플 개선을 위한 해체 할당자를 사용하면, 보다 명시적으로 튜플의 인자에 접근 가능
  - 비권장 예제

    - ```
            let student: [string, number]; 
           const [name, age] = student;
          ```
      - student.name 또는 const {name} = student;로 일반화 가능. 코드 내에서 가능 시 여러 사용법을 남용하면 안됨.
- React 사용 예시 (튜플 사용 좋은 케이스)

  - ```
        const [count, setCount] = useState(0);
      ```

    - useState는 튜플 형태로 리턴됨.
    - 튜플 리턴 시 사용자가 원하는 이름 형태로 사용가능하게 활용함.

  - ```
        function useState(<S>(initialState: S | (()=> S)) : [S, Dispatch<SetStateAction<S>] ); 
     ```

## 참고

- <https://yamoo9.gitbook.io/typescript/types/tuple>

- <https://academy.dream-coding.com/courses/take/typescript/lessons/20065321-2-8>
