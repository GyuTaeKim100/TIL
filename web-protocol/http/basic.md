# HTTP Summary

## HTTP
 1. 정의
      - HyperText Transfer Protocol
 2. 용도
      1. HTTP 메시지에 모든 것을 전송
         - 예시
            1. HTML, TEXT
            2. IMAGE, 음성, 영상, 파일
            3. JSON, XML (API)
            4. 거의 모든 형태의 데이터 전송 가능
                - 의문
                  -  전송 불가 데이터는 무엇이 존재?
            5. 서버간 데이터 송수신시 대부분 HTTP 사용
                - 의문
                  - 어떤 서버 간?
  3. 역사
       1. HTTP/0.9
            - 1991년
            - GET 메서드만 지원
            - HTTP 헤더 비지원
       2. HTTP/1.0
            - 1996년
            - 메서드 및 헤더 추가
       3. HTTP/1.1
            - 1997년
            - 현 기준 가장 많이 사용 중
            - 개정 타임라인
                - RFC2068 (1997) -> RFC2616 (1999) -> RFC7230 ~ RFC 7235 (2014)
       4. HTTP/2
            - 2015년
            - 성능 개선 초점
       5. HTTP/3
            - 개발 진행 중
            - TCP 대신 UDP 사용
            - 성능 개선 초점
    4. 기반 프로토콜
         1. TCP
              -  HTTP/1.1
              -  HTTP/2
         2. UDP
              - HTTP/3
              - 애플리케이션 레벨에서 성능 개선

    5. 확인
        1. Chrome browser 개발자 도구
        2. google에 hello 검색
        3. Network - protocol

    6. 특징
        1. 클라이언트 - 서버 구조
        2. 무상태 프로토콜(state-less)
        3. 비연결성
        4. HTTP 메시지
        5. 단순함
        6. 확장 가능

## Clinet - Server 구조
  1. 특징
       1. Request 및 Response 구조
  2. 과정
       1. 클라이언트는 서버에 요청을 보내고, 요청에 대한 응답을 대기
       2. 서버가 요청을 수신 
       3. 수신한 요청의 결과를 생성해서 응답

## Statefull, Stateless 차이
 - 상태 유지 : Statefull
     - 예시
         ```
              고객: 이 노트북 얼마?
              점원: 100만원

              고객 2개 구매
              점원: 총 200만원. 결제 수단은 신용카드 또는 현금?

              고객: 신용카드 선택
              점원: 200만원 결제 완료
         ```
     - 예시2
         ```
              고객: 이 노트북 얼마?
              점원: 100만원 (노트북 상태 유지)

              고객 2개 구매
              점원: 총 200만원. 결제 수단은 신용카드 또는 현금? (노트북, 2개 상태 유지)


              고객: 신용카드 선택
              점원: 200만원 결제 완료 (노트북, 2개, 신용카드 상태 유지)
         ```
     - 예시3 : 점원이 중간에 바뀌면?
         ```
               고객: 이 노트북 얼마?
               점원A: 100만원

               고객: 노트북 2개 구매
               점원B: 무엇을 2개는 200만원. 결제 수단은 신용카드 또는 현금?

               고객: 노트북 2개를 신용카드로 구매
               점원C: 200만원 결제 완료
         ```
         - 문제 발생
           - (점원A, B, C가 문맥 공유 안하는 경우) 문맥이 사라짐
     - 결론
          1. 중간에 다른 점원(서버)으로 바뀌면 안된다.
               - 중간에 다른 점원으로 바뀔 때 상태 정보를 다른 점원에게 미리 알려줘야 한다
     - 규칙
          1. 항상 같은 서버가 유지되어야 한다.
               - 같은 기능을 하는 서버군 중 1개만이 지속적인 요청에 대한 응답 가능
               - 단점
                   1. 서버 늘리기 어렵다
                   2. 서버 장애 시 클라이언트의 상태는 사라짐(서버 내에서 상태를 관리하는 경우)
  
  - 상태 없음 : Stateless
      - 기본 예시 : 점원이 중간에 바뀌면?
         ```
          고객: 이 노트북 얼마?
          점원A: 100만원

          고객: 2개 구매
          점원B: 무엇을 2개 구매?

          고객: 신용 카드 선택
          점원C: 무슨 제품? 몇개?
         ```
       - 개선 예시1 : 점원이 1명
         ```
          고객: 이 노트북 얼마?
          점원: 100만원

          고객: 노트북 2개 구매
          점원: 무엇을 2개는 200만원. 결제 수단은 신용카드 또는 현금?

          고객: 노트북 2개를 신용카드로 구매
          점원: 200만원 결제 완료
         ```
       - 개선 예시2 : 점원이 중간에 바뀌면?
          ```
               고객: 이 노트북 얼마?
               점원A: 100만원

               고객: 노트북 2개 구매
               점원B: 무엇을 2개는 200만원. 결제 수단은 신용카드 또는 현금?

               고객: 노트북 2개를 신용카드로 구매
               점원C: 200만원 결제 완료
          ```
           - 고객이 필요한 데이터를 모두 명시
           - 점원 바뀌어도 문제가 없다
           - 확장성(무한증식)
       - 결론
         - 중간에 다른 점원(서버)으로 바뀌어도 된다
             - 갑자기 고객이 증가해도 점원을 대거 투입할 수 있다
             - 갑자기 클라이언트 요청이 증가해도 서버를 대거 투입 할 수 있다.
         - 무상태는 응답 서버를 쉽게 바꿀 수 있다.
             - 무한한 서버 증설 가능
       - 규칙
         1. 아무 서버나 호출해도 된다
            - 서버는 상태를 보관하지 않음
         2. scale out - 수평 확장에 유리
            - 같은 기능을 하는 서버군 중 한개가 요청에 대한 응답 처리 가능
       - 실무 한계
         1. 모든 것을 무상태로 설계할 수 있는 경우도 있고 없는 경우도 있다.
         2. 무상태 예시
               1. (로그인이 필요없는) 단순한 서비스 소개 화면
         3. 상태 유지
               1. 로그인
         4. 로그인한 사용자의 경우 로그인 했다는 상태를 서버에 유지
         5. 일반적으로 브라우저 쿠키와 서버 세션 등을 사용해서 상태 유지
         6. 최대한 무상태로 설계
         7. 상태(문맥)를 클라이언트에서 관리 및 요청에 상태를 전달 시 복잡해진다(?)

## 무상태 프로토콜
   1. 특징
      1. stateless
      2. 서버가 클라이언트의 상태를 보존 안함
      3. 장점
          - 서버 scale out에 유리
      4. 단점
          - 클라이언트가 추가 데이터(상태 관련, 문맥, ... etc) 전송 필요


## 참고
 - https://www.inflearn.com/course/http-%EC%9B%B9-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC/lecture/61361?tab=curriculum&volume=0.12&quality=auto